<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="http://vmphone2.cs.berkeley.edu/jquery-1.5.1.min.js"></script>
<script language="Javascript">
//
// This method Gets URL Parameters (GUP)
//
function gup( name )
{
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var tmpURL = window.location.href;
  var results = regex.exec( tmpURL );
  if( results == null )
    return "";
  else
    return results[1];
}

function changeText(node, newText){
	node.removeChild(node.firstChild);
	node.appendChild(document.createTextNode(newText));
}

//
// This method decodes the query parameters that were URL-encoded
//
function decode(strToDecode)
{
  var encoded = strToDecode;
  return unescape(encoded.replace(/\+/g,  " "));
}

</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Umati-Mturk</title>
</head>

<body>
<table width="800" border="0">
  <tr>
    <td><h1>Please try to grade this particular exam question. The first area (Green) is the question given to the student. The second area (Orange) is the professor's example answer. The last area (Yellow) is a scan of the student's answer. Please do your best to grade the question appropriately.</h1></td>
  </tr>
  <tr>
    <td bgcolor="#00FF66"><h2 id="question">Question: %d</h2></td>
  </tr>
  <tr>
    <td bgcolor="#FF6600"><h2 id="professor">Professor's Answer: %d</h2></td>
  </tr>
  <tr>
    <td bgcolor="#CCFF33"><img  width="100%" src="http://vmphone2.cs.berkeley.edu/umati/1/1_2.png"/></td>
  </tr>
  <tr>
    <td><form id="form1" name="form1" method="post" action="">
    <input type="range" min="0" max="4" name="grade"/>
    </form></td>
  </tr>
</table>
<script language="Javascript">
	changeText(document.getElementById('professor'), gup('max_grade'));
	changeText(document.getElementById('question'), gup('max_grade'));

    //
    // Check if the worker is PREVIEWING the HIT or if they've ACCEPTED the HIT
    //
    if (gup('assignmentId') == "ASSIGNMENT_ID_NOT_AVAILABLE")
    {
  // If we're previewing, disable the button and give it a helpful message
  document.getElementById('submitButton').disabled = true;
  document.getElementById('submitButton').value = "You must ACCEPT the HIT before you can submit the results.";
    } else {
        var form = document.getElementById('mturk_form');
        if (document.referrer && ( document.referrer.indexOf('workersandbox') != -1) ) {
            form.action = "http://workersandbox.mturk.com/mturk/externalSubmit";
        }
    }

</script>
</body>
</html>
